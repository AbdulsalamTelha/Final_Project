{%extends "base.html" %}

{%block title%}Change Password{%endblock title%}

{% block breadcrumb %}
    <li>
        <span class="mx-1">/</span>
    </li>
    <li>
        <a href="{% url 'profile' %}" class="hover:text-blue-600 dark:hover:text-blue-400">
            Profile
        </a>
    </li>
    <li>
        <span class="mx-1">/</span>
    </li>
    <li class="text-gray-800 dark:text-gray-200 font-semibold">
        Change Password
    </li>
{% endblock breadcrumb %}

{% block content %}
<div class="flex items-center justify-center">
    <div class="bg-white dark:bg-gray-700 p-8 rounded-lg shadow-md w-full max-w-md">
        <h2 class="text-2xl font-bold text-center mb-6">Change Password</h2>
        <form method="POST" enctype="multipart/form-data" class="space-y-4">
            {% csrf_token %}
            
            <!-- كلمة المرور الحالية -->
            <div>
                <label for="old_password" class="block font-medium">Current Password</label>
                <div class="relative">
                    <input type="password" name="old_password" id="old_password" maxlength="30"
                            class="w-full mt-2 p-2 border dark:bg-gray-800 
                            {% if form.errors.old_password %} border-red-500 dark:border-red-400 focus:ring-red-200 dark:focus:ring-red-400 
                            {% else %} border-gray-300 dark:border-gray-500 focus:ring-indigo-200 dark:focus:ring-gray-400 {% endif %} 
                            rounded-md focus:outline-none focus:ring"
                            value="{{ form.old_password.value|default_if_none:'' }}">
                    <i class="fas fa-eye absolute right-4 top-5 cursor-pointer text-gray-500 dark:text-gray-400"
                        onclick="togglePasswordVisibility('old_password', this)"></i>
                </div>
                {% if form.errors.old_password %}
                    <p class="text-red-600 dark:text-red-400 text-sm mt-0">{{ form.errors.old_password.0 }}</p>
                {% endif %}
            </div>

            <!-- كلمة المرور الجديدة -->
            <div>
                <label for="new_password_1" class="block font-medium">New Password</label>
                <div class="relative">
                    <input type="password" name="new_password1" id="new_password_1" maxlength="30"
                            class="w-full mt-2 p-2 border dark:bg-gray-800 
                            {% if form.errors.new_password1 %} border-red-500 dark:border-red-400 focus:ring-red-200 dark:focus:ring-red-400 
                            {% else %} border-gray-300 dark:border-gray-500 focus:ring-indigo-200 dark:focus:ring-gray-400 {% endif %} 
                            rounded-md focus:outline-none focus:ring"
                            value="{{ form.new_password1.value|default_if_none:'' }}">
                    <i class="fas fa-eye absolute right-4 top-5 cursor-pointer text-gray-500 dark:text-gray-400"
                        onclick="togglePasswordVisibility('new_password_1', this)"></i>
                </div>
                {% if form.errors.new_password1 %}
                    <p class="text-red-600 dark:text-red-400 text-sm mt-0">{{ form.errors.new_password1.0 }}</p>
                {% endif %}
            </div>

            <!-- تأكيد كلمة المرور الجديدة -->
            <div>
                <label for="new_password_2" class="block font-medium">Confirm Password</label>
                <div class="relative">
                    <input type="password" name="new_password2" id="new_password_2" maxlength="30"
                            class="w-full mt-2 p-2 border dark:bg-gray-800 
                            {% if form.errors.new_password2 %} border-red-500 dark:border-red-400 focus:ring-red-200 dark:focus:ring-red-400 
                            {% else %} border-gray-300 dark:border-gray-500 focus:ring-indigo-200 dark:focus:ring-gray-400 {% endif %} 
                            rounded-md focus:outline-none focus:ring"
                            value="{{ form.new_password2.value|default_if_none:'' }}">
                    <i class="fas fa-eye absolute right-4 top-5 cursor-pointer text-gray-500 dark:text-gray-400"
                        onclick="togglePasswordVisibility('new_password_2', this)"></i>
                </div>
                {% if form.errors.new_password2 %}
                    <p class="text-red-600 dark:text-red-400 text-sm mt-0">{{ form.errors.new_password2.0 }}</p>
                {% endif %}
            </div>

            <!-- زر الحفظ -->
            <button type="submit" 
                    class="w-full bg-blue-500 text-white p-2 rounded-md hover:bg-blue-600 dark:bg-gray-500 dark:hover:bg-gray-400 focus:outline-none focus:ring focus:ring-indigo-200 dark:focus:ring-gray-500 transition duration-300">
                Change
            </button>
        </form>
    </div>
</div>
{% endblock content %}
