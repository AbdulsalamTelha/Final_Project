{% extends "base.html" %}

{% block title %}Logs{% endblock title %}

{% block breadcrumb %}
    <li>
        <span class="mx-1">/</span>
    </li>
    <li class="text-gray-800 dark:text-gray-200 font-semibold">
        Logs
    </li>
{% endblock breadcrumb %}

{% block content %}
<div class="container mx-auto p-4">
    <h1 class="text-2xl font-bold mb-4 text-gray-800 dark:text-white">Log Viewer</h1>

    <!-- Filters -->
    <form method="get" class="flex items-center space-x-4 mb-4">
        <select name="log_type" class="p-2 bg-gray-200 dark:bg-gray-800 border border-gray-400 dark:border-gray-600 rounded text-gray-800 dark:text-white">
            <option value="admin" {% if log_type == 'admin' %}selected{% endif %}>Admin Logs</option>
            <option value="server" {% if log_type == 'server' %}selected{% endif %}>Server Logs</option>
        </select>
        <input type="text" name="filter" value="{{ filter_keyword }}" placeholder="Search by keyword..." 
               class="p-2 bg-gray-200 dark:bg-gray-800 border border-gray-400 dark:border-gray-600 rounded w-full text-gray-800 dark:text-white">
        <button type="submit" class="p-2 bg-blue-500 hover:bg-blue-400 text-white rounded">Apply</button>
    </form>

    <!-- Download Button -->
    <form method="get" action="/downloadLogs/" class="mb-4">
        <input type="hidden" name="log_type" value="{{ log_type }}">
        <button type="submit" class="p-2 bg-green-500 hover:bg-green-400 text-white rounded">Download Logs</button>
    </form>

    <!-- Log Display -->
    <div class="bg-gray-100 dark:bg-black p-4 rounded-lg shadow-lg h-96 overflow-y-auto font-mono text-sm border border-gray-300 dark:border-gray-700">
        {% if logs %}
            {% for line in logs %}
                <p class="text-black-700 dark:text-green-400">{{ line }}</p>
            {% endfor %}
        {% else %}
            <p class="text-red-700 dark:text-red-400">No logs found.</p>
        {% endif %}
    </div>
</div>
{% endblock content %}
